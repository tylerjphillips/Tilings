<html>
<head>
	<script src="https://code.createjs.com/easeljs-0.8.2.min.js"></script>
	<script>
        function get_inner_radius(radius, sidelength)
        {
            return Math.sqrt((radius * radius) - (sidelength * sidelength / 4))
        }

        function sidelength_to_outer_radius(sidelength, number_of_sides)
        {
            return sidelength / (2 * Math.sin(Math.PI / number_of_sides))
        }

        function get_shape_radii(sidelength, number_of_sides)
		{
		    var outer_radius = sidelength_to_outer_radius(sidelength, number_of_sides);
            var inner_radius = get_inner_radius(outer_radius, sidelength);
            return [inner_radius, outer_radius]
		}

        function polar_to_cartesian(direction, magnitude) {
            <!-- creates an x,y vector given a direction(degrees) and a magnitude-->
            var dir = direction
            var x = magnitude * Math.cos((dir / 360) * 2 * Math.PI)
            var y = magnitude * Math.sin((dir / 360) * 2 * Math.PI)
            return [x, y]
        }

        function angle_trunc(a)
        {
            <!-- helper function for point_direction-->
            while (a < 0.0)
                a += math.pi * 2
            return a
        }

        function point_direction(coord1, coord2) {
            <!-- returns the angle in degrees from two coordinates -->
            var dy = coord2[1] - coord1[1]
            var dx = coord2[0] - coord1[0]
            return angle_trunc(Math.atan2(dy, dx)) * 180 / Math.PI
        }

        function add_directional_vector(coords, direction, magnitude)
        {
            <!--Takes [x,y] adds a vector to it and returns the new [x,y]-->
            var vector = polar_to_cartesian(direction,magnitude)
            return [coords[0] + vector[0], coords[1] + vector[1]]
        }

        function get_new_shape_values(coords, direction, sidelength, number_of_sides_current, number_of_sides_new, first_shape = false)
		{
		    <!-- Takes an origin, a direction, the sidelength, and number of sides of the current and new regular polygons. Returns the xy coordinates and radius of the new polygon -->

		    var old_radii = get_shape_radii(sidelength, number_of_sides_current);
			var shape_angle;

		    <!-- Use the inner radii of both shapes to calculate the vector for where the new shape will lie, then add it to existing coords  -->
			if (!first_shape)
			{
			    var new_radii = get_shape_radii(sidelength, number_of_sides_new);
			    var new_coords = add_directional_vector(coords, direction, old_radii[0]+new_radii[0]);
			    shape_angle = get_modified_shape_angle(direction, number_of_sides_new);
				return [new_coords[0], new_coords[1], new_radii[1], number_of_sides_new, shape_angle]
			}
			else
			{
			    shape_angle = get_modified_shape_angle(direction, number_of_sides_current);
			    return [coords[0], coords[1], old_radii[1], number_of_sides_current, shape_angle]
			}
		}

		function get_modified_shape_angle(direction, number_of_sides)
		{
		    <!-- Gives an angular offset value for drawing polygons. Even numbered shapes have an offset while odd doesn't  -->
		    return direction + ((number_of_sides % 2) == 0 ? (360 / (number_of_sides * 2)) : 0)
		}

		function create_shapes(canvas, starting_coords, sidelength, shape_data)
		{
		    <!-- Shape_data = [[shape1.direction, shape1.number_of_sides, shape1.color],....]-->
			if (shape_data.length > 0)
			{
                var data = get_new_shape_values(starting_coords, shape_data[0][0], sidelength, shape_data[0][1], 0, true)
                polygon = new createjs.Shape();
                polygon.graphics.beginFill(shape_data[0][2]).drawPolyStar(data[0], data[1], data[2], data[3], 0, data[4]);
                canvas.addChild(polygon);

                for (var i = 1; i < shape_data.length; i++)
				{
				    data = get_new_shape_values([data[0], data[1]], shape_data[i][0], sidelength, data[3] ,shape_data[i][1], false)
				    polygon = new createjs.Shape();
					polygon.graphics.beginFill(shape_data[i][2]).drawPolyStar(data[0], data[1], data[2], data[3], 0, data[4]);
					canvas.addChild(polygon);
				}

				canvas.update();
			}
		}

		function init()
		{
            var sidelength = 20;
			var stage = new createjs.Stage("demoCanvas");

			shape_data = [
			    [0,3,"green"],
				[60,6,"blue"],
				[0,6,"purple"],
				[60,6,"orange"],
			];

			create_shapes(stage,[60,60], sidelength, shape_data);
		}
	</script>
</head>
<body onload="init();">
	<canvas id="demoCanvas" width="500" height="200">
		alternate content
	</canvas>

</body></html>